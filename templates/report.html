{% extends 'base.html' %}
{% block content %}
<h2>Wellness Class Report</h2>
<div class="mb-3">
    <a href="{{ url_for('admin.report', format='csv') }}" class="btn btn-primary">Download as CSV</a>
    <a href="{{ url_for('admin.dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
</div>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Class Name</th>
            <th>Date</th>
            <th>Time</th>
            <th>Teacher</th>
            <th>Location</th>
            <th>Attendees</th>
        </tr>
    </thead>
    <tbody>
        {% for class in classes %}
            <tr>
                <td>{{ class.name }}</td>
                <td>{{ class.date }}</td>
                <td>{{ class.time }}</td>
                <td>{{ class.teacher.username }}</td>
                <td>{{ class.location }}</td>
                <td>
                    {% if class.attendees %}
                        <ul>
                            {% for attendee in class.attendees %}
                                <li>{{ attendee.name }} (Stipend: {{ 'Yes' if attendee.stipend else 'No' }}, Group: {{ attendee.group or '-' }}, Comments: {{ attendee.comments or '-' }}, Checked In: {{ 'Yes' if attendee.checked_in else 'No' }})</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        No attendees
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}